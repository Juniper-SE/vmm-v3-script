#include "/vmm/bin/common.defs"
#include "/vmm/data/user_disks/vmxc/common.vmx.p3.defs"
#include "/vmm/data/user_disks/vptxc/common.evovptx.ardbeg.defs"
#include "/vmm/data/user_disks/vptxc/common.ardbeg.defs"
#undef gw_disk 
#define gw_disk basedisk "/vmm/data/user_disks/irzan/images/gw.qcow2";
#undef ubuntu_disk 
#define ubuntu_disk basedisk "/vmm/data/user_disks/irzan/images/ubuntu24.04.qcow2";
#undef vjunos_switch_disk 
#define vjunos_switch_disk basedisk "/vmm/data/user_disks/irzan/images/vJunos-switch-25.2R1.9.qcow2";
config "os" {
    bridge "lan1"{};
    bridge "lan2"{};
    bridge "lan3"{};
    bridge "sw1p1"{};
    bridge "sw1p2"{};
    bridge "sw1p3"{};
    bridge "sw1p4"{};
    bridge "sw1p5"{};
    bridge "reserved_bridge"{};
    PRIVATE_BRIDGES
    vm "gw" {
       hostname "gw";
       gw_disk
       ncpus 2;
       memory 4096;
       setvar "+qemu_args" "-cpu qemu64,+vmx";
       install "/vmm/data/user_disks/irzan/vm/os/gw.conf" "/gw.conf";
       interface "em0" { bridge "external";};
       interface "em1" { bridge "lan1";};
       interface "em2" { bridge "lan2";};
       interface "em3" { bridge "lan3";};
        
    };
    vm "lxc" {
       hostname "lxc";
       ubuntu_disk
       ncpus 4;
       memory 16384;
       setvar "+qemu_args" "-cpu qemu64,+vmx";
       setvar "enable_vnc" "1";
       install "/vmm/data/user_disks/irzan/vm/os/lxc.conf" "/lxc.conf";
       interface "em0" { bridge "lan1";};
       interface "em1" { bridge "lan3";};
        
    };
    vm "node1" {
       hostname "node1";
       ubuntu_disk
       disk "hdb" "/vmm/data/user_disks/irzan/vm/os/node1_disk2.img";
       disk "hdc" "/vmm/data/user_disks/irzan/vm/os/node1_disk3.img";
       ncpus 8;
       memory 32768;
       setvar "+qemu_args" "-cpu host,+vmx";
       setvar "enable_vnc" "1";
       install "/vmm/data/user_disks/irzan/vm/os/node1.conf" "/node1.conf";
       interface "em0" { bridge "lan1";};
       interface "em1" { bridge "sw1p1";};
        
    };
    vm "node2" {
       hostname "node2";
       ubuntu_disk
       disk "hdb" "/vmm/data/user_disks/irzan/vm/os/node2_disk2.img";
       disk "hdc" "/vmm/data/user_disks/irzan/vm/os/node2_disk3.img";
       ncpus 8;
       memory 32768;
       setvar "+qemu_args" "-cpu host,+vmx";
       setvar "enable_vnc" "1";
       install "/vmm/data/user_disks/irzan/vm/os/node2.conf" "/node2.conf";
       interface "em0" { bridge "lan1";};
       interface "em1" { bridge "sw1p2";};
        
    };
    vm "node3" {
       hostname "node3";
       ubuntu_disk
       disk "hdb" "/vmm/data/user_disks/irzan/vm/os/node3_disk2.img";
       disk "hdc" "/vmm/data/user_disks/irzan/vm/os/node3_disk3.img";
       ncpus 8;
       memory 32768;
       setvar "+qemu_args" "-cpu host,+vmx";
       setvar "enable_vnc" "1";
       install "/vmm/data/user_disks/irzan/vm/os/node3.conf" "/node3.conf";
       interface "em0" { bridge "lan1";};
       interface "em1" { bridge "sw1p3";};
        
    };
    vm "node4" {
       hostname "node4";
       ubuntu_disk
       disk "hdb" "/vmm/data/user_disks/irzan/vm/os/node4_disk2.img";
       disk "hdc" "/vmm/data/user_disks/irzan/vm/os/node4_disk3.img";
       ncpus 8;
       memory 32768;
       setvar "+qemu_args" "-cpu host,+vmx";
       setvar "enable_vnc" "1";
       install "/vmm/data/user_disks/irzan/vm/os/node4.conf" "/node4.conf";
       interface "em0" { bridge "lan1";};
       interface "em1" { bridge "sw1p4";};
        
    };
    vm "node5" {
       hostname "node5";
       ubuntu_disk
       disk "hdb" "/vmm/data/user_disks/irzan/vm/os/node5_disk2.img";
       disk "hdc" "/vmm/data/user_disks/irzan/vm/os/node5_disk3.img";
       ncpus 8;
       memory 32768;
       setvar "+qemu_args" "-cpu host,+vmx";
       setvar "enable_vnc" "1";
       install "/vmm/data/user_disks/irzan/vm/os/node5.conf" "/node5.conf";
       interface "em0" { bridge "lan1";};
       interface "em1" { bridge "sw1p5";};
        
    };
    vm "sw1" {
       hostname "sw1";
       vjunos_switch_disk
       ncpus 4;
       memory 8196;
       setvar "+qemu_args" "-cpu host,+vmx -smbios type=1,product=VM-VEX";
       install "/vmm/data/user_disks/irzan/vm/os/sw1.conf" "/sw1.conf";
       interface "vio0" { bridge "lan1";};
       interface "vio1" { bridge "lan2";};
       interface "vio2" { bridge "sw1p1";};
       interface "vio3" { bridge "sw1p2";};
       interface "vio4" { bridge "sw1p3";};
       interface "vio5" { bridge "sw1p4";};
       interface "vio6" { bridge "sw1p5";};
        
    };
    
};
