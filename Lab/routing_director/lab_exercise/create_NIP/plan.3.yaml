infrastructure_ntw:
  default_interface_profiles:
  - IP1
  default_node_profiles: []
  default_port_profiles:
  - PP1
  interface_profiles:
    interface_profile:
    - name: IP1
      templates: []
  node_profiles:
    node_profile:
    - analytics:
        traffic_engineering: {}
      ipv6_tunneling:
        enabled: false
      labels: []
      name: DP1
      per_flow_load_balancing:
        enabled: false
      templates: []
      trust:
        enabled: true
    - analytics:
        traffic_engineering: {}
      ipv6_tunneling:
        enabled: true
      labels: []
      name: DP1_PE
      pcep: 
        pce_address: 172.16.12.3
        stateful: 
          active:
            p2mp: false
            p2mp_pce_initiated: false
          flowspec: false
      per_flow_load_balancing:
        enabled: false
      templates: []
      trust:
        enabled: true
  port_profiles:
    port_profile: 
      - name: PP1
  labels:
    label: []
  network_nodes:
    network_node:
    {% for node in nodes -%}
    - installation:
        duration: 5
      {% if nodes[node].interfaces -%}
      interfaces:
        interface: 
        {% for interface in nodes[node].interfaces -%}
        - access_parameters:
            ces: []
          link: {{interface.link}}
          name: {{interface.name}}
          profiles: []
        {% endfor -%}
        port: []
      {% endif -%}
      model: vMX
      name: {{node}}
      node_type: paper-node
      profiles: {{nodes[node].profile}}
      serial: {{ nodes[node].sernum}}
      site_id: {{ nodes[node].site}}
      vendor: Juniper Networks
    {% endfor -%}
